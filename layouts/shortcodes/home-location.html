{{ $_hugo_config := `{ "version": 1 }` }}
<section class="location">

  {{ if and (.Get "latitude") (.Get "longitude") }}
    <div class="map-embed">
      <iframe
        title="Event location map"
        width="100%"
        height="360"
        frameborder="0"
        scrolling="no"
        marginheight="0"
        marginwidth="0"
        src="https://www.openstreetmap.org/export/embed.html?bbox={{ sub (float (.Get `longitude`)) 0.01 }},{{ sub (float (.Get `latitude`)) 0.01 }},{{ add (float (.Get `longitude`)) 0.01 }},{{ add (float (.Get `latitude`)) 0.01 }}&layer=mapnik&marker={{ .Get `latitude` }},{{ .Get `longitude` }}">
      </iframe>
      <small>
        <a href="https://www.openstreetmap.org/?mlat={{ .Get `latitude` }}&mlon={{ .Get `longitude` }}#map=16/{{ .Get `latitude` }}/{{ .Get `longitude` }}" target="_blank" rel="noopener">
          View larger map
        </a>
      </small>
    </div>
  {{ else }}
    <div class="map" style="background-image: url('{{ .Get "image" }}');"></div>
  {{ end }}

  <div class="description">
    <div class="inner">
      {{ .Inner }}
    </div>

    <div class="direction">
      {{ .Get "address" }}

      <a href="https://www.google.com/maps/dir/?api=1&destination={{ .Get "latitude" }},{{ .Get "longitude" }}"
        class="btn btn-icon-only" target="_blank" rel="noreferrer"
         aria-label="{{ i18n "home_location_direction" }}">
        {{ partial "icon.html" "direction" }}
      </a>
    </div>
  </div>
</section>