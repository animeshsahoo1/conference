{{ $_hugo_config := `{ "version": 1 }` }}
<section class="location">
  <div class="location-content">
    {{ if and (.Get "latitude") (.Get "longitude") }}
      <div class="map-embed">
        <iframe
          title="Event location map"
          width="100%"
          height="360"
          frameborder="0"
          scrolling="no"
          marginheight="0"
          marginwidth="0"
          src="https://www.openstreetmap.org/export/embed.html?bbox={{ sub (float (.Get "longitude")) 0.002 }},{{ sub (float (.Get "latitude")) 0.002 }},{{ add (float (.Get "longitude")) 0.002 }},{{ add (float (.Get "latitude")) 0.002 }}&layer=mapnik&marker={{ .Get "latitude" }},{{ .Get "longitude" }}">
        </iframe>
        
        <!-- Inner content inside map -->
        <!-- {{ if .Inner }}
        <div class="inner">
          {{ .Inner }}
        </div>
        {{ end }} -->
        
        <!-- Direction button inside map -->
        <div class="direction">
          {{ .Get "address" }}
          <a href="https://www.google.com/maps/dir/?api=1&destination={{ .Get "latitude" }},{{ .Get "longitude" }}"
            class="btn btn-icon-only" target="_blank" rel="noreferrer"
             aria-label="Get directions">
            {{ partial "icon.html" "direction" }}
          </a>
        </div>
        
        <small>
          <a href="https://www.openstreetmap.org/?mlat={{ .Get "latitude" }}&mlon={{ .Get "longitude" }}#map=19/{{ .Get "latitude" }}/{{ .Get "longitude" }}" target="_blank" rel="noopener">
            View larger map
          </a>
        </small>
      </div>
    {{ else }}
      <div class="map" style="background-image: url('{{ .Get "image" }}'); background-size: cover; background-position: center;">
        {{ if .Inner }}
        <div class="inner">
          {{ .Inner }}
        </div>
        {{ end }}
        
        <div class="direction">
          {{ .Get "address" }}
        </div>
      </div>
    {{ end }}
  </div>
</section>
